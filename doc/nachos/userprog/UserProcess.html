<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_65) on Mon Oct 06 14:39:22 CST 2014 -->
<title>UserProcess</title>
<meta name="date" content="2014-10-06">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="UserProcess";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserProcess.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../nachos/userprog/UserKernel.html" title="class in nachos.userprog"><span class="strong">Prev Class</span></a></li>
<li><a href="../../nachos/userprog/UThread.html" title="class in nachos.userprog"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?nachos/userprog/UserProcess.html" target="_top">Frames</a></li>
<li><a href="UserProcess.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">nachos.userprog</div>
<h2 title="Class UserProcess" class="title">Class UserProcess</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>nachos.userprog.UserProcess</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../nachos/vm/VMProcess.html" title="class in nachos.vm">VMProcess</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">UserProcess</span>
extends java.lang.Object</pre>
<div class="block">Encapsulates the state of a user process that is not contained in its user
 thread (or threads). This includes its address translation state, a file
 table, and information about the program being executed.
 
 <p>
 This class is extended by other classes to support additional functionality
 (such as additional syscalls).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../nachos/vm/VMProcess.html" title="class in nachos.vm"><code>VMProcess</code></a>, 
<a href="../../nachos/network/NetProcess.html" title="class in nachos.network"><code>NetProcess</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../nachos/userprog/UserProcess.html#UserProcess()">UserProcess</a></strong>()</code>
<div class="block">Allocate a new process.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#execute(java.lang.String,%20java.lang.String[])">execute</a></strong>(java.lang.String&nbsp;name,
       java.lang.String[]&nbsp;args)</code>
<div class="block">Execute the specified program with the specified arguments.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#handleException(int)">handleException</a></strong>(int&nbsp;cause)</code>
<div class="block">Handle a user exception.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#handleSyscall(int,%20int,%20int,%20int,%20int)">handleSyscall</a></strong>(int&nbsp;syscall,
             int&nbsp;a0,
             int&nbsp;a1,
             int&nbsp;a2,
             int&nbsp;a3)</code>
<div class="block">Handle a syscall exception.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#initRegisters()">initRegisters</a></strong>()</code>
<div class="block">Initialize the processor's registers in preparation for running the
 program loaded into this process.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../nachos/userprog/UserProcess.html" title="class in nachos.userprog">UserProcess</a></code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#newUserProcess()">newUserProcess</a></strong>()</code>
<div class="block">Allocate and return a new process of the correct class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#readVirtualMemory(int,%20byte[])">readVirtualMemory</a></strong>(int&nbsp;vaddr,
                 byte[]&nbsp;data)</code>
<div class="block">Transfer data from this process's virtual memory to all of the specified
 array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#readVirtualMemory(int,%20byte[],%20int,%20int)">readVirtualMemory</a></strong>(int&nbsp;vaddr,
                 byte[]&nbsp;data,
                 int&nbsp;offset,
                 int&nbsp;length)</code>
<div class="block">Transfer data from this process's virtual memory to the specified array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#readVirtualMemoryString(int,%20int)">readVirtualMemoryString</a></strong>(int&nbsp;vaddr,
                       int&nbsp;maxLength)</code>
<div class="block">Read a null-terminated string from this process's virtual memory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#restoreState()">restoreState</a></strong>()</code>
<div class="block">Restore the state of this process after a context switch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#saveState()">saveState</a></strong>()</code>
<div class="block">Save the state of this process in preparation for a context switch.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#writeVirtualMemory(int,%20byte[])">writeVirtualMemory</a></strong>(int&nbsp;vaddr,
                  byte[]&nbsp;data)</code>
<div class="block">Transfer all data from the specified array to this process's virtual
 memory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../nachos/userprog/UserProcess.html#writeVirtualMemory(int,%20byte[],%20int,%20int)">writeVirtualMemory</a></strong>(int&nbsp;vaddr,
                  byte[]&nbsp;data,
                  int&nbsp;offset,
                  int&nbsp;length)</code>
<div class="block">Transfer data from the specified array to this process's virtual memory.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="UserProcess()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserProcess</h4>
<pre>public&nbsp;UserProcess()</pre>
<div class="block">Allocate a new process.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newUserProcess()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newUserProcess</h4>
<pre>public static&nbsp;<a href="../../nachos/userprog/UserProcess.html" title="class in nachos.userprog">UserProcess</a>&nbsp;newUserProcess()</pre>
<div class="block">Allocate and return a new process of the correct class. The class name is
 specified by the <tt>nachos.conf</tt> key
 <tt>Kernel.processClassName</tt>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a new process of the correct class.</dd></dl>
</li>
</ul>
<a name="execute(java.lang.String, java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre>public&nbsp;boolean&nbsp;execute(java.lang.String&nbsp;name,
              java.lang.String[]&nbsp;args)</pre>
<div class="block">Execute the specified program with the specified arguments. Attempts to
 load the program, and then forks a thread to run it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - the name of the file containing the executable.</dd><dd><code>args</code> - the arguments to pass to the executable.</dd>
<dt><span class="strong">Returns:</span></dt><dd><tt>true</tt> if the program was successfully executed.</dd></dl>
</li>
</ul>
<a name="saveState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveState</h4>
<pre>public&nbsp;void&nbsp;saveState()</pre>
<div class="block">Save the state of this process in preparation for a context switch.
 Called by <tt>UThread.saveState()</tt>.</div>
</li>
</ul>
<a name="restoreState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreState</h4>
<pre>public&nbsp;void&nbsp;restoreState()</pre>
<div class="block">Restore the state of this process after a context switch. Called by
 <tt>UThread.restoreState()</tt>.</div>
</li>
</ul>
<a name="readVirtualMemoryString(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readVirtualMemoryString</h4>
<pre>public&nbsp;java.lang.String&nbsp;readVirtualMemoryString(int&nbsp;vaddr,
                                       int&nbsp;maxLength)</pre>
<div class="block">Read a null-terminated string from this process's virtual memory. Read at
 most <tt>maxLength + 1</tt> bytes from the specified address, search for
 the null terminator, and convert it to a <tt>java.lang.String</tt>,
 without including the null terminator. If no null terminator is found,
 returns <tt>null</tt>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vaddr</code> - the starting virtual address of the null-terminated string.</dd><dd><code>maxLength</code> - the maximum number of characters in the string, not including
            the null terminator.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the string read, or <tt>null</tt> if no null terminator was
         found.</dd></dl>
</li>
</ul>
<a name="readVirtualMemory(int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readVirtualMemory</h4>
<pre>public&nbsp;int&nbsp;readVirtualMemory(int&nbsp;vaddr,
                    byte[]&nbsp;data)</pre>
<div class="block">Transfer data from this process's virtual memory to all of the specified
 array. Same as <tt>readVirtualMemory(vaddr, data, 0, data.length)</tt>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vaddr</code> - the first byte of virtual memory to read.</dd><dd><code>data</code> - the array where the data will be stored.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes successfully transferred.</dd></dl>
</li>
</ul>
<a name="readVirtualMemory(int, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readVirtualMemory</h4>
<pre>public&nbsp;int&nbsp;readVirtualMemory(int&nbsp;vaddr,
                    byte[]&nbsp;data,
                    int&nbsp;offset,
                    int&nbsp;length)</pre>
<div class="block">Transfer data from this process's virtual memory to the specified array.
 This method handles address translation details. This method must
 <i>not</i> destroy the current process if an error occurs, but instead
 should return the number of bytes successfully copied (or zero if no data
 could be copied).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vaddr</code> - the first byte of virtual memory to read.</dd><dd><code>data</code> - the array where the data will be stored.</dd><dd><code>offset</code> - the first byte to write in the array.</dd><dd><code>length</code> - the number of bytes to transfer from virtual memory to the
            array.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes successfully transferred.</dd></dl>
</li>
</ul>
<a name="writeVirtualMemory(int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeVirtualMemory</h4>
<pre>public&nbsp;int&nbsp;writeVirtualMemory(int&nbsp;vaddr,
                     byte[]&nbsp;data)</pre>
<div class="block">Transfer all data from the specified array to this process's virtual
 memory. Same as <tt>writeVirtualMemory(vaddr, data, 0, data.length)</tt>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vaddr</code> - the first byte of virtual memory to write.</dd><dd><code>data</code> - the array containing the data to transfer.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes successfully transferred.</dd></dl>
</li>
</ul>
<a name="writeVirtualMemory(int, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeVirtualMemory</h4>
<pre>public&nbsp;int&nbsp;writeVirtualMemory(int&nbsp;vaddr,
                     byte[]&nbsp;data,
                     int&nbsp;offset,
                     int&nbsp;length)</pre>
<div class="block">Transfer data from the specified array to this process's virtual memory.
 This method handles address translation details. This method must
 <i>not</i> destroy the current process if an error occurs, but instead
 should return the number of bytes successfully copied (or zero if no data
 could be copied).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vaddr</code> - the first byte of virtual memory to write.</dd><dd><code>data</code> - the array containing the data to transfer.</dd><dd><code>offset</code> - the first byte to transfer from the array.</dd><dd><code>length</code> - the number of bytes to transfer from the array to virtual
            memory.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes successfully transferred.</dd></dl>
</li>
</ul>
<a name="initRegisters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initRegisters</h4>
<pre>public&nbsp;void&nbsp;initRegisters()</pre>
<div class="block">Initialize the processor's registers in preparation for running the
 program loaded into this process. Set the PC register to point at the
 start function, set the stack pointer register to point at the top of the
 stack, set the A0 and A1 registers to argc and argv, respectively, and
 initialize all other registers to 0.</div>
</li>
</ul>
<a name="handleSyscall(int, int, int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleSyscall</h4>
<pre>public&nbsp;int&nbsp;handleSyscall(int&nbsp;syscall,
                int&nbsp;a0,
                int&nbsp;a1,
                int&nbsp;a2,
                int&nbsp;a3)</pre>
<div class="block">Handle a syscall exception. Called by <tt>handleException()</tt>. The
 <i>syscall</i> argument identifies which syscall the user executed:
 
 <table>
 <tr>
 <td>syscall#</td>
 <td>syscall prototype</td>
 </tr>
 <tr>
 <td>0</td>
 <td><tt>void halt();</tt></td>
 </tr>
 <tr>
 <td>1</td>
 <td><tt>void exit(int status);</tt></td>
 </tr>
 <tr>
 <td>2</td>
 <td><tt>int  exec(char *name, int argc, char **argv);
                                                                </tt></td>
 </tr>
 <tr>
 <td>3</td>
 <td><tt>int  join(int pid, int *status);</tt></td>
 </tr>
 <tr>
 <td>4</td>
 <td><tt>int  creat(char *name);</tt></td>
 </tr>
 <tr>
 <td>5</td>
 <td><tt>int  open(char *name);</tt></td>
 </tr>
 <tr>
 <td>6</td>
 <td><tt>int  read(int fd, char *buffer, int size);
                                                                </tt></td>
 </tr>
 <tr>
 <td>7</td>
 <td><tt>int  write(int fd, char *buffer, int size);
                                                                </tt></td>
 </tr>
 <tr>
 <td>8</td>
 <td><tt>int  close(int fd);</tt></td>
 </tr>
 <tr>
 <td>9</td>
 <td><tt>int  unlink(char *name);</tt></td>
 </tr>
 </table></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>syscall</code> - the syscall number.</dd><dd><code>a0</code> - the first syscall argument.</dd><dd><code>a1</code> - the second syscall argument.</dd><dd><code>a2</code> - the third syscall argument.</dd><dd><code>a3</code> - the fourth syscall argument.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the value to be returned to the user.</dd></dl>
</li>
</ul>
<a name="handleException(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>handleException</h4>
<pre>public&nbsp;void&nbsp;handleException(int&nbsp;cause)</pre>
<div class="block">Handle a user exception. Called by <tt>UserKernel.exceptionHandler()</tt>
 . The <i>cause</i> argument identifies which exception occurred; see the
 <tt>Processor.exceptionZZZ</tt> constants.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cause</code> - the user exception that occurred.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserProcess.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../nachos/userprog/UserKernel.html" title="class in nachos.userprog"><span class="strong">Prev Class</span></a></li>
<li><a href="../../nachos/userprog/UThread.html" title="class in nachos.userprog"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?nachos/userprog/UserProcess.html" target="_top">Frames</a></li>
<li><a href="UserProcess.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
